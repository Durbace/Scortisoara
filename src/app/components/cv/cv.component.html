<div class="modal fade" tabindex="-1" aria-hidden="true" #cvModal>
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content shadow-lg rounded-4 overflow-hidden">
      <div class="modal-header bg-maro text-light">
        <h2 class="modal-title fs-5" id="cvTitle">
          {{ "cv.title" | transloco }}
        </h2>
        <button
          type="button"
          class="btn-close btn-close-white"
          aria-label="Close"
          (click)="closeModal()"
        ></button>
      </div>

      <div class="modal-body bg-body-gradient" *ngIf="cv as cvd">
        <section class="container" style="max-width: 920px">
          <header class="my-3">
            <div class="d-flex align-items-center gap-3">
              <div class="cv__avatar">DE</div>
              <div>
                <h1 class="cv__name m-0">{{ cvd.header.name }}</h1>
                <p class="cv__links mb-0">
                  <a [href]="'tel:' + cvd.header.phone">{{
                    cvd.header.phone
                  }}</a>
                  <span class="mx-2 opacity-50">•</span>
                  <a [attr.href]="cvd.header.emailHref">{{
                    cvd.header.emailText
                  }}</a>
                  <span class="mx-2 opacity-50">•</span>
                  <a
                    [href]="cvd.header.linkedinHref"
                    target="_blank"
                    rel="noopener"
                    >{{ cvd.header.linkedinText }}</a
                  >
                  <span class="mx-2 opacity-50">•</span>
                  <a
                    [href]="cvd.header.githubHref"
                    target="_blank"
                    rel="noopener"
                    >{{ cvd.header.githubText }}</a
                  >
                </p>
              </div>
            </div>
          </header>

          <article class="my-4">
            <h2 class="h6 mb-3">
              <span class="pill">{{ cvd.sections.education.title }}</span>
            </h2>

            <ul class="list-unstyled border-start ps-3">
              <li
                class="cv-item py-2"
                *ngFor="let ed of cvd.sections.education.items"
              >
                <div class="row g-3">
                  <div
                    class="col-12 col-md-3 text-md-end text-muted small fw-semibold"
                  >
                    {{ ed.period }}
                  </div>
                  <div class="col-12 col-md-9">
                    <h3 class="h6 fw-bold mb-1">{{ ed.degree }}</h3>
                    <p class="mb-0 text-muted">
                      {{ ed.institution }} — {{ ed.location }}
                    </p>
                  </div>
                </div>
              </li>
            </ul>

            <p class="text-muted small mb-0">
              {{ cvd.sections.education.coursework }}
            </p>
          </article>

          <article class="my-4">
            <h2 class="h6 mb-3">
              <span class="pill">{{ cvd.sections.experience.title }}</span>
            </h2>

            <ul class="list-unstyled border-start ps-3">
              <li
                class="cv-item py-2"
                *ngFor="let ex of cvd.sections.experience.items"
              >
                <div class="row g-3">
                  <div class="col-12 col-md-3 text-md-end">
                    <div class="small fw-semibold text-muted">
                      {{ ex.period }}
                    </div>
                    <div class="small text-muted">{{ ex.location }}</div>
                  </div>
                  <div class="col-12 col-md-9">
                    <h3 class="h6 fw-bold mb-2 mb-md-1">
                      {{ ex.role }}
                      <span class="text-maro">— {{ ex.company }}</span>
                    </h3>
                    <ul class="mb-0 ps-3">
                      <li *ngFor="let b of ex.bullets">{{ b }}</li>
                    </ul>
                  </div>
                </div>
              </li>
            </ul>
          </article>

          <article class="my-4">
            <h2 class="h6 mb-3">
              <span class="pill">{{ cvd.sections.projects.title }}</span>
            </h2>

            <div class="row g-3">
              <div class="col-12" *ngFor="let p of cvd.sections.projects.items">
                <div class="card border-0 bg-crem-subtle">
                  <div class="card-body">
                    <a
                      class="cv-project__title"
                      [href]="p.link"
                      target="_blank"
                      rel="noopener"
                      >{{ p.title }}</a
                    >
                    <span class="cv-project__stack">{{ p.stack }}</span>
                    <p class="cv-project__desc mb-0 mt-2">{{ p.desc }}</p>
                  </div>
                </div>
              </div>
            </div>
          </article>

          <article class="my-4">
            <h2 class="h6 mb-3">
              <span class="pill">{{ cvd.sections.skills.title }}</span>
            </h2>

            <ul class="tags">
              <li
                *ngFor="let t of cvd.sections.skills.programming | splitByComma"
              >
                {{ t }}
              </li>
            </ul>
            <ul class="tags">
              <li
                *ngFor="let t of cvd.sections.skills.frameworks | splitByComma"
              >
                {{ t }}
              </li>
            </ul>

            <p class="cv-soft mb-1">{{ cvd.sections.skills.soft }}</p>
            <p class="cv-soft mb-1">{{ cvd.sections.skills.languages }}</p>
            <p class="cv-soft mb-0">{{ cvd.sections.skills.interests }}</p>
          </article>
        </section>
      </div>

      <div class="modal-footer bg-crem">
        <button
          class="btn btn-maro text-light fw-bold"
          type="button"
          (click)="downloadPdf()"
        >
          {{ "cv.actions.downloadPdf" | transloco }}
        </button>
        <button
          class="btn btn-outline-maro fw-bold"
          type="button"
          (click)="closeModal()"
        >
          {{ "cv.actions.close" | transloco }}
        </button>
      </div>
    </div>
  </div>
</div>
